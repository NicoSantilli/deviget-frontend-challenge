(this["webpackJsonpdeviget-frontend-challenge"]=this["webpackJsonpdeviget-frontend-challenge"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),i=n(81),l=n(26),s=n(155),u=n(154),m=n(158),d=n(159),p=n(157),f=n(80),b=n.n(f),E=n(156),O=n(27),v=n(153),j=n(16),g=n(12),h=n(13),w=n(141),y=n(148),_=n(17),x=n(144),k=n(145),P=n(161),I=n(146),N=n(160),S=n(147),L=n(49),M=n(21),D=n(82),R=Object(D.a)({name:"redditPosts",initialState:{isErrored:!1,isLoading:!1,posts:[],post:{},lastPostId:""},reducers:{loadPosts:function(e){return Object(M.a)(Object(M.a)({},e),{},{isLoading:!0})},savePosts:function(e,t){var n=t.payload,a=n.children.slice(-1).pop(),r=n.before||a?"".concat(a.kind,"_").concat(a.data.id):"";return Object(M.a)(Object(M.a)({},e),{},{isLoading:!1,posts:[].concat(Object(L.a)(e.posts),Object(L.a)(n.children)),lastPostId:r})},dismissAllPosts:function(e){return Object(M.a)(Object(M.a)({},e),{},{posts:[],post:{}})},dismissPost:function(e,t){var n=t.payload,a=function(e,t){return e.posts.filter((function(e){return e.data.id!==t}))}(e,n),r=e.post.data;return Object(M.a)(Object(M.a)({},e),{},{posts:a,post:n===(null===r||void 0===r?void 0:r.id)?{}:e.post})},markAsRead:function(e,t){(function(e,t){return e.posts.find((function(e){return e.data.id===t})).data}(e,t.payload)).clicked=!0},seePostDetails:function(e,t){var n=t.payload;return Object(M.a)(Object(M.a)({},e),{},{post:n})}}}),C=R.reducer,B=R.actions,T=B.loadPosts,A=B.savePosts,F=B.dismissAllPosts,U=B.dismissPost,X=B.markAsRead,G=B.seePostDetails,z=n(45),J=n.n(z),V=n(70),H=n.n(V),W=n(71),q=n.n(W).a.create({baseURL:"https://www.reddit.com/"}),K=n(28),Q=function(e){return H.a.unix(e).fromNow()},Y=function(e,t){e(T()),q.get("top.json".concat(function(e){return Object(K.isNil)(e)?"":"?".concat(Object.keys(e).filter((function(t){return e[t]})).map((function(t){return"".concat(t,"=").concat(e[t]||"")})).join("&"))}(t))).then((function(t){var n=t.data;e(A(n.data))}))};function Z(){var e=Object(g.a)(["\n  & > span {\n    color: "," !important;\n  }\n"]);return Z=function(){return e},e}function $(){var e=Object(g.a)(["\n  flex-grow: 1 !important;\n"]);return $=function(){return e},e}function ee(){var e=Object(g.a)(["\n  padding-left: 16px !important;\n  padding-right: 16px !important;\n"]);return ee=function(){return e},e}var te=Object(h.a)(w.a)(ee()),ne=Object(h.a)(x.a)($()),ae=Object(h.a)(k.a)(Z(),(function(e){return e.color})),re=function(e){var t=e.post,n=e.setMobileOpen,o=Object(_.b)(),c=t.data,i=c.id,l=c.title,s=c.author,u=c.thumbnail,m=c.num_comments,d=c.created_utc,p=c.clicked;return r.a.createElement(a.Fragment,{key:i},r.a.createElement(P.a,{button:!0,onClick:function(){o(X(i)),o(G(t)),n(!1)},alignItems:"flex-start"},r.a.createElement(I.a,null,r.a.createElement(N.a,{alt:i,src:u,onClick:function(e){e.stopPropagation(),window.open(u)}})),r.a.createElement(ae,{color:p?"rgba(0,0,0,.3)":"#000",primary:l,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{component:"span",variant:"body2",color:"textSecondary"},"Posted by ",r.a.createElement("strong",null,"u/",s)," ",Q(d)," "))})),r.a.createElement(te,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(w.a,{item:!0,xs:!0},r.a.createElement(ne,{startIcon:r.a.createElement(J.a,null),onClick:function(){o(U(i))}},"Dismiss")),r.a.createElement(w.a,{item:!0,xs:!0},r.a.createElement(O.a,{component:"span",variant:"body2",color:"textSecondary"},"".concat(m," comments")))),r.a.createElement(S.a,null))};function oe(){var e=Object(g.a)(["\n  margin: 0;\n  position: absolute;\n  top: ","%;\n"]);return oe=function(){return e},e}function ce(){var e=Object(g.a)(["\n  display: flex !important;\n  justify-content: center !important;\n"]);return ce=function(){return e},e}function ie(){var e=Object(g.a)(["\n  min-width: 100%;\n  height: 100%;\n  overflow-y: scroll;\n"]);return ie=function(){return e},e}var le=Object(h.a)(w.a)(ie()),se=h.a.div(ce()),ue=Object(h.a)(y.a)(oe(),(function(e){return e.top})),me=function(e){var t=e.setMobileOpen,n=Object(_.c)((function(e){return e})),o=n.posts,c=n.isLoading,i=n.lastPostId,l=Object(_.b)();!Object(K.isEmpty)(o)||c||i||Y(l,{limit:50});var s=Object(a.useRef)(),u=Object(a.useCallback)((function(e){c||(s.current&&s.current.disconnect(),s.current=new IntersectionObserver((function(e){e[0].isIntersecting&&Y(l,{limit:50,after:i})})),e&&s.current.observe(e))}),[c,l,i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(le,{item:!0,xs:!0},o.map((function(e,n){return o.length===n+1?r.a.createElement("div",{key:e.data.id,ref:u},r.a.createElement(re,{post:e,setMobileOpen:t})):r.a.createElement(re,{key:e.data.id,post:e,setMobileOpen:t})})),c&&r.a.createElement(se,null,r.a.createElement(ue,{top:Object(K.isEmpty)(o)?"50":"100"}))))},de=n(149),pe=n(150),fe=n(151),be=n(152),Ee=n(78),Oe=n.n(Ee),ve=n(79),je=n.n(ve);function ge(){var e=Object(g.a)(["\n  max-width: 50% !important;\n"]);return ge=function(){return e},e}function he(){var e=Object(g.a)(["\n  display: flex !important;\n  align-items: center !important;\n  color: rgba(0, 0, 0, 0.54) !important;\n\n  & > svg {\n    margin-right: 5px !important;\n  }\n"]);return he=function(){return e},e}function we(){var e=Object(g.a)(["\n  display: flex !important;\n  justify-content: center !important;\n"]);return we=function(){return e},e}function ye(){var e=Object(g.a)(["\n  font-weight: bold !important;\n  color: rgba(0, 0, 0, 0.54);\n  text-decoration: none !important;\n"]);return ye=function(){return e},e}function _e(){var e=Object(g.a)(["\n  max-width: 50% !important;\n"]);return _e=function(){return e},e}var xe=h.a.img(_e()),ke=h.a.a(ye()),Pe=Object(h.a)(de.a)(we()),Ie=Object(h.a)(O.a)(he()),Ne=h.a.video(ge()),Se=function(e){var t,n=e.post.data,a=n.post_hint,o=n.url,c=n.secure_media,i=n.media_embed;switch(a){case"image":return r.a.createElement(xe,{src:o});case"hosted:video":case"rich:video":var l=null===c||void 0===c||null===(t=c.reddit_video)||void 0===t?void 0:t.fallback_url,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(null===i||void 0===i?void 0:i.content);return l?r.a.createElement(Ne,{controls:!0,autoPlay:!0,loop:!0,duration:!0},r.a.createElement("source",{src:l,type:"video/mp4"})):r.a.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:s}});default:return r.a.createElement(O.a,null,r.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer"},o))}},Le=function(){var e=Object(_.c)((function(e){return e})).post,t=e.data||{},n=t.title,a=t.author,o=t.created_utc,c=t.num_comments,i=t.subreddit_name_prefixed,l=t.upvote_ratio,s=t.score;return Object(K.isEmpty)(e)?r.a.createElement(pe.a,null,r.a.createElement(fe.a,{title:"No post selected",subheader:"Select one post from the posts list to see the details"})):r.a.createElement(pe.a,null,r.a.createElement(fe.a,{title:n,subheader:r.a.createElement(r.a.Fragment,null,r.a.createElement(ke,{href:"https://reddit.com/".concat(i),target:"_blank"},i)," ","\u2022 Posted by ",r.a.createElement("strong",null,"u/",a)," ",Q(o)," ")}),r.a.createElement(Pe,null,r.a.createElement(Se,{post:e})),r.a.createElement(be.a,null,r.a.createElement(Ie,null,r.a.createElement(Oe.a,{fontSize:"small"}),"".concat(c," comments")),r.a.createElement(Ie,{style:{flexGrow:"1"}},r.a.createElement(je.a,{fontSize:"small"}),"".concat(s," points")),r.a.createElement(Ie,null,"".concat(Math.floor(100*l),"% upvoted"))))},Me=Object(v.a)((function(e){var t;return{root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("md"),{width:440,flexShrink:0}),appBar:Object(l.a)({},e.breakpoints.up("md"),{width:"calc(100% - ".concat(440,"px)"),marginLeft:440}),menuButton:Object(l.a)({marginRight:e.spacing(2)},e.breakpoints.up("md"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:(t={},Object(l.a)(t,e.breakpoints.down("sm"),{width:286}),Object(l.a)(t,"width",440),t),content:{flexGrow:1,padding:e.spacing(3)}}})),De=function(e){var t=e.window,n=Object(_.b)(),o=Me(),c=Object(j.a)(),l=Object(a.useState)(!1),f=Object(i.a)(l,2),v=f[0],g=f[1],h=Object(_.c)((function(e){return e})),w=h.isLoading,y=h.lastPostId,k=function(){g(!v)},P=void 0!==t?function(){return t().document.body}:void 0;return r.a.createElement("div",{className:o.root},r.a.createElement(u.a,null),r.a.createElement(s.a,{position:"fixed",className:o.appBar},r.a.createElement(E.a,null,r.a.createElement(p.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:k,className:o.menuButton},r.a.createElement(b.a,null)),r.a.createElement(O.a,{variant:"h6",noWrap:!0,style:{flexGrow:"1"}},"Reddit posts"),r.a.createElement(x.a,{variant:"contained",startIcon:r.a.createElement(J.a,null),disabled:w,onClick:function(){n(F()),Y(n,{limit:50,after:y})}},"Dismiss all posts"))),r.a.createElement("nav",{className:o.drawer},r.a.createElement(d.a,{mdUp:!0,implementation:"css"},r.a.createElement(m.a,{container:P,variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:v,onClose:k,classes:{paper:o.drawerPaper},ModalProps:{keepMounted:!0}},r.a.createElement(me,{setMobileOpen:g}))),r.a.createElement(d.a,{smDown:!0,implementation:"css"},r.a.createElement(m.a,{classes:{paper:o.drawerPaper},variant:"permanent",open:!0},r.a.createElement(me,{setMobileOpen:g})))),r.a.createElement("main",{className:o.content},r.a.createElement("div",{className:o.toolbar}),r.a.createElement(Le,null)))},Re=function(){return r.a.createElement(De,null)},Ce=n(15),Be=Object(Ce.e)(C,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(r.a.createElement(_.a,{store:Be},r.a.createElement(Re,null)),document.getElementById("root"))},86:function(e,t,n){e.exports=n(112)}},[[86,1,2]]]);
//# sourceMappingURL=main.175e606d.chunk.js.map