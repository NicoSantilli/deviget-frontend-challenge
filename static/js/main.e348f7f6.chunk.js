(this["webpackJsonpdeviget-frontend-challenge"]=this["webpackJsonpdeviget-frontend-challenge"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),o=n.n(c),i=n(81),l=n(26),s=n(155),u=n(154),m=n(158),d=n(159),p=n(157),f=n(80),b=n.n(f),E=n(156),v=n(27),O=n(153),j=n(16),g=n(12),h=n(13),w=n(141),y=n(148),_=n(23),x=n(144),k=n(145),P=n(161),N=n(146),I=n(160),S=n(147),M=n(47),L=n(20),D=n(82),R=Object(D.a)({name:"redditPosts",initialState:{isErrored:!1,isLoading:!1,posts:[],post:{},lastPostId:""},reducers:{loadPosts:function(e){return Object(L.a)(Object(L.a)({},e),{},{isLoading:!0})},savePosts:function(e,t){var n=t.payload,a=n.children.slice(-1).pop(),r=n.before||a?"".concat(a.kind,"_").concat(a.data.id):"";return Object(L.a)(Object(L.a)({},e),{},{isLoading:!1,posts:[].concat(Object(M.a)(e.posts),Object(M.a)(n.children)),lastPostId:r})},dismissAllPosts:function(e){return Object(L.a)(Object(L.a)({},e),{},{posts:[]})},dismissPost:function(e,t){var n=t.payload,a=function(e,t){return e.posts.filter((function(e){return e.data.id!==t}))}(e,n),r=e.post.data;return Object(L.a)(Object(L.a)({},e),{},{posts:a,post:n===(null===r||void 0===r?void 0:r.id)?{}:e.post})},markAsRead:function(e,t){(function(e,t){return e.posts.find((function(e){return e.data.id===t})).data}(e,t.payload)).clicked=!0},seePostDetails:function(e,t){var n=t.payload;return Object(L.a)(Object(L.a)({},e),{},{post:n})}}}),B=R.reducer,C=R.actions,T=C.loadPosts,A=C.savePosts,F=(C.dismissAllPosts,C.dismissPost),U=C.markAsRead,X=C.seePostDetails,z=n(77),G=n.n(z),J=n(69),V=n.n(J),H=n(70),W=n.n(H).a.create({baseURL:"https://www.reddit.com/"}),q=n(30),K=function(e){return V.a.unix(e).fromNow()},Q=function(e,t){e(T()),W.get("top.json".concat(function(e){return Object(q.isNil)(e)?"":"?".concat(Object.keys(e).filter((function(t){return e[t]})).map((function(t){return"".concat(t,"=").concat(e[t]||"")})).join("&"))}(t))).then((function(t){var n=t.data;e(A(n.data))}))};function Y(){var e=Object(g.a)(["\n  & > span {\n    ","\n  }\n"]);return Y=function(){return e},e}function Z(){var e=Object(g.a)(["\n  flex-grow: 1 !important;\n"]);return Z=function(){return e},e}function $(){var e=Object(g.a)(["\n  padding-left: 16px !important;\n  padding-right: 16px !important;\n"]);return $=function(){return e},e}var ee=Object(h.a)(w.a)($()),te=Object(h.a)(x.a)(Z()),ne=Object(h.a)(k.a)(Y(),(function(e){return e.clicked?"color: rgba(0,0,0,.3)":"color: #000 !important"})),ae=function(e){var t=e.post,n=e.setMobileOpen,c=Object(_.b)(),o=t.data,i=o.id,l=o.title,s=o.author,u=o.thumbnail,m=o.num_comments,d=o.created_utc,p=o.clicked;return r.a.createElement(a.Fragment,{key:i},r.a.createElement(P.a,{button:!0,onClick:function(){c(U(i)),c(X(t)),n(!1)},alignItems:"flex-start"},r.a.createElement(N.a,null,r.a.createElement(I.a,{alt:i,src:u})),r.a.createElement(ne,{clicked:p,primary:l,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{component:"span",variant:"body2",color:"textSecondary"},"Posted by ",r.a.createElement("strong",null,"u/",s)," ",K(d)," "))})),r.a.createElement(ee,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(w.a,{item:!0,xs:!0},r.a.createElement(te,{startIcon:r.a.createElement(G.a,null),onClick:function(){c(F(i))}},"Dismiss")),r.a.createElement(w.a,{item:!0,xs:!0},r.a.createElement(v.a,{component:"span",variant:"body2",color:"textSecondary"},"".concat(m," comments")))),r.a.createElement(S.a,null))};function re(){var e=Object(g.a)(["\n  display: flex !important;\n  justify-content: center !important;\n"]);return re=function(){return e},e}function ce(){var e=Object(g.a)(["\n  min-width: 100%;\n  height: 100%;\n  overflow-y: scroll;\n"]);return ce=function(){return e},e}var oe=Object(h.a)(w.a)(ce()),ie=h.a.div(re()),le=function(e){var t=e.setMobileOpen,n=Object(_.c)((function(e){return e})),c=n.posts,o=n.isLoading,i=n.lastPostId,l=Object(_.b)();Object(q.isEmpty)(c)&&!o&&Q(l,{limit:50});var s=Object(a.useRef)(),u=Object(a.useCallback)((function(e){o||(s.current&&s.current.disconnect(),s.current=new IntersectionObserver((function(e){e[0].isIntersecting&&Q(l,{limit:50,after:i})})),e&&s.current.observe(e))}),[o,l,i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{item:!0,xs:!0},c.map((function(e,n){return c.length===n+1?r.a.createElement("div",{key:e.data.id,ref:u},r.a.createElement(ae,{post:e,setMobileOpen:t})):r.a.createElement(ae,{key:e.data.id,post:e,setMobileOpen:t})})),o&&r.a.createElement(ie,null,r.a.createElement(y.a,null))))},se=n(149),ue=n(150),me=n(151),de=n(152),pe=n(78),fe=n.n(pe),be=n(79),Ee=n.n(be);function ve(){var e=Object(g.a)(["\n  max-width: 50% !important;\n"]);return ve=function(){return e},e}function Oe(){var e=Object(g.a)(["\n  display: flex !important;\n  align-items: center !important;\n  color: rgba(0, 0, 0, 0.54) !important;\n\n  & > svg {\n    margin-right: 5px !important;\n  }\n"]);return Oe=function(){return e},e}function je(){var e=Object(g.a)(["\n  display: flex !important;\n  justify-content: center !important;\n"]);return je=function(){return e},e}function ge(){var e=Object(g.a)(["\n  font-weight: bold !important;\n  color: rgba(0, 0, 0, 0.54);\n  text-decoration: none !important;\n"]);return ge=function(){return e},e}function he(){var e=Object(g.a)(["\n  max-width: 50% !important;\n"]);return he=function(){return e},e}function we(){var e=Object(g.a)(["\n  border-radius: 0px !important;\n"]);return we=function(){return e},e}var ye=Object(h.a)(se.a)(we()),_e=h.a.img(he()),xe=h.a.a(ge()),ke=Object(h.a)(ue.a)(je()),Pe=Object(h.a)(v.a)(Oe()),Ne=h.a.video(ve()),Ie=function(e){var t,n=e.post.data,a=n.post_hint,c=n.url,o=n.secure_media,i=n.media_embed;switch(a){case"image":return r.a.createElement(_e,{src:c});case"hosted:video":case"rich:video":var l=null===o||void 0===o||null===(t=o.reddit_video)||void 0===t?void 0:t.fallback_url,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(null===i||void 0===i?void 0:i.content);return l?r.a.createElement(Ne,{controls:!0,autoPlay:!0,loop:!0,duration:!0},r.a.createElement("source",{src:l,type:"video/mp4"})):r.a.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:s}});default:return r.a.createElement(v.a,null,r.a.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer"},c))}},Se=function(){var e=Object(_.c)((function(e){return e})).post,t=e.data||{},n=t.title,a=t.author,c=t.created_utc,o=t.num_comments,i=t.subreddit_name_prefixed,l=t.upvote_ratio,s=t.score;return!Object(q.isEmpty)(e)&&r.a.createElement(ye,null,r.a.createElement(me.a,{title:n,subheader:r.a.createElement(r.a.Fragment,null,r.a.createElement(xe,{href:"https://reddit.com/".concat(i),target:"_blank"},i)," ","\u2022 Posted by ",r.a.createElement("strong",null,"u/",a)," ",K(c)," ")}),r.a.createElement(ke,null,r.a.createElement(Ie,{post:e})),r.a.createElement(de.a,null,r.a.createElement(Pe,null,r.a.createElement(fe.a,{fontSize:"small"}),"".concat(o," comments")),r.a.createElement(Pe,{style:{flexGrow:"1"}},r.a.createElement(Ee.a,{fontSize:"small"}),"".concat(s," points")),r.a.createElement(Pe,null,"".concat(Math.floor(100*l),"% upvoted"))))},Me=Object(O.a)((function(e){var t;return{root:{display:"flex"},drawer:Object(l.a)({},e.breakpoints.up("md"),{width:440,flexShrink:0}),appBar:Object(l.a)({},e.breakpoints.up("md"),{width:"calc(100% - ".concat(440,"px)"),marginLeft:440}),menuButton:Object(l.a)({marginRight:e.spacing(2)},e.breakpoints.up("md"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:(t={},Object(l.a)(t,e.breakpoints.down("sm"),{width:286}),Object(l.a)(t,"width",440),t),content:{flexGrow:1,padding:e.spacing(3)}}})),Le=function(e){var t=e.window,n=Me(),c=Object(j.a)(),o=Object(a.useState)(!1),l=Object(i.a)(o,2),f=l[0],O=l[1],g=function(){O(!f)},h=void 0!==t?function(){return t().document.body}:void 0;return r.a.createElement("div",{className:n.root},r.a.createElement(u.a,null),r.a.createElement(s.a,{position:"fixed",className:n.appBar},r.a.createElement(E.a,null,r.a.createElement(p.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:g,className:n.menuButton},r.a.createElement(b.a,null)),r.a.createElement(v.a,{variant:"h6",noWrap:!0},"Reddit posts"))),r.a.createElement("nav",{className:n.drawer},r.a.createElement(d.a,{mdUp:!0,implementation:"css"},r.a.createElement(m.a,{container:h,variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:f,onClose:g,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!0}},r.a.createElement(le,{setMobileOpen:O}))),r.a.createElement(d.a,{smDown:!0,implementation:"css"},r.a.createElement(m.a,{classes:{paper:n.drawerPaper},variant:"permanent",open:!0},r.a.createElement(le,{setMobileOpen:O})))),r.a.createElement("main",{className:n.content},r.a.createElement("div",{className:n.toolbar}),r.a.createElement(Se,null)))},De=function(){return r.a.createElement(Le,null)},Re=n(15),Be=Object(Re.e)(B,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(r.a.createElement(_.a,{store:Be},r.a.createElement(De,null)),document.getElementById("root"))},86:function(e,t,n){e.exports=n(112)}},[[86,1,2]]]);
//# sourceMappingURL=main.e348f7f6.chunk.js.map