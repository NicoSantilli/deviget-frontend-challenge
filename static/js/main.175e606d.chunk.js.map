{"version":3,"sources":["redux/reducers/postsReducer.js","axios/index.js","utils/index.js","components/PostItem.jsx","components/PostsList.jsx","components/PostDetails.jsx","components/Layout.jsx","App.js","redux/store/index.js","index.js"],"names":["posts","createSlice","name","initialState","isErrored","isLoading","post","lastPostId","reducers","loadPosts","state","savePosts","payload","lastPostRetrieved","children","slice","pop","lastPost","before","kind","data","id","dismissAllPosts","dismissPost","filter","filterPosts","markAsRead","find","findPost","clicked","seePostDetails","postsReducer","reducer","actions","axiosInstance","Axios","create","baseURL","getDate","created_utc","moment","unix","fromNow","loadRedditPosts","dispatch","params","get","isNil","Object","keys","value","map","key","join","buildQueryParams","then","ActionGrid","styled","Grid","DismissButton","Button","StyledListItemText","ListItemText","color","PostItem","props","setMobileOpen","useDispatch","title","author","thumbnail","num_comments","ListItem","button","onClick","alignItems","ListItemAvatar","Avatar","alt","src","e","stopPropagation","window","open","primary","secondary","Typography","component","variant","container","justify","item","xs","startIcon","Divider","PostsGrid","StyledDiv","div","StyledCircularProgress","CircularProgress","top","PostsList","useSelector","isEmpty","limit","latestPost","useRef","lastElementRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","after","observe","i","length","ref","StyledImg","img","StyledLink","a","StyledCardMedia","CardMedia","StyledTypography","StyledVideo","video","Media","post_hint","url","secure_media","media_embed","fallbackUrl","reddit_video","fallback_url","mediaEmbedContent","content","replace","parseHtml","controls","autoPlay","loop","duration","type","className","dangerouslySetInnerHTML","__html","href","target","rel","PostDetails","subreddit_name_prefixed","upvote_ratio","score","Card","CardHeader","subheader","CardActions","fontSize","style","flexGrow","Math","floor","useStyles","makeStyles","theme","root","display","drawer","breakpoints","up","width","flexShrink","appBar","marginLeft","menuButton","marginRight","spacing","toolbar","mixins","drawerPaper","down","drawerWidth","padding","Layout","classes","useTheme","useState","mobileOpen","handleDrawerToggle","undefined","document","body","CssBaseline","AppBar","position","Toolbar","IconButton","aria-label","edge","noWrap","disabled","Hidden","mdUp","implementation","Drawer","anchor","direction","onClose","paper","ModalProps","keepMounted","smDown","App","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.175e606d.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nconst findPost = (state, id) =>\n  state.posts.find((post) => {\n    return post.data.id === id;\n  }).data;\n\nconst filterPosts = (state, id) =>\n  state.posts.filter((post) => {\n    return post.data.id !== id;\n  });\n\nconst posts = createSlice({\n  name: \"redditPosts\",\n  initialState: {\n    isErrored: false,\n    isLoading: false,\n    posts: [],\n    post: {},\n    lastPostId: \"\",\n  },\n  reducers: {\n    loadPosts: (state) => {\n      return { ...state, isLoading: true };\n    },\n    savePosts: (state, { payload }) => {\n      const lastPostRetrieved = payload.children.slice(-1).pop();\n      const lastPost =\n        payload.before || lastPostRetrieved\n          ? `${lastPostRetrieved.kind}_${lastPostRetrieved.data.id}`\n          : \"\";\n\n      return {\n        ...state,\n        isLoading: false,\n        posts: [...state.posts, ...payload.children],\n        lastPostId: lastPost,\n      };\n    },\n    dismissAllPosts: (state) => {\n      return {\n        ...state,\n        posts: [],\n        post: {},\n      };\n    },\n    dismissPost: (state, { payload }) => {\n      const posts = filterPosts(state, payload);\n      const post = state.post.data;\n      return {\n        ...state,\n        posts,\n        post: payload === post?.id ? {} : state.post,\n      };\n    },\n    markAsRead: (state, { payload }) => {\n      const post = findPost(state, payload);\n      post.clicked = true;\n    },\n    seePostDetails: (state, { payload }) => {\n      return {\n        ...state,\n        post: payload,\n      };\n    },\n  },\n});\n\nexport const {\n  reducer: postsReducer,\n  actions: {\n    loadPosts,\n    savePosts,\n    dismissAllPosts,\n    dismissPost,\n    markAsRead,\n    seePostDetails,\n  },\n} = posts;\n","import Axios from \"axios\";\n\nexport const axiosInstance = Axios.create({\n  baseURL: `https://www.reddit.com/`,\n});\n","import moment from \"moment\";\nimport { axiosInstance } from \"../axios\";\nimport { isNil } from \"lodash\";\nimport { loadPosts, savePosts } from \"../redux/reducers/postsReducer\";\n\nexport const getDate = (created_utc) => {\n  return moment.unix(created_utc).fromNow();\n};\n\nexport const parseHtml = (content = \"\") =>\n  content.replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\");\n\nconst buildQueryParams = (params) => {\n  if (isNil(params)) return \"\";\n\n  return `?${Object.keys(params)\n    .filter((value) => params[value])\n    .map((key) => `${key}=${params[key] || \"\"}`)\n    .join(\"&\")}`;\n};\n\nexport const loadRedditPosts = (dispatch, params) => {\n  dispatch(loadPosts());\n  axiosInstance.get(`top.json${buildQueryParams(params)}`).then(({ data }) => {\n    dispatch(savePosts(data.data));\n  });\n};\n","import React, { Fragment } from \"react\";\nimport styled from \"styled-components\";\nimport {\n  Grid,\n  Typography,\n  Avatar,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Divider,\n  Button,\n} from \"@material-ui/core\";\nimport {\n  dismissPost,\n  seePostDetails,\n  markAsRead,\n} from \"../redux/reducers/postsReducer\";\nimport { useDispatch } from \"react-redux\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { getDate } from \"../utils\";\n\nconst ActionGrid = styled(Grid)`\n  padding-left: 16px !important;\n  padding-right: 16px !important;\n`;\n\nconst DismissButton = styled(Button)`\n  flex-grow: 1 !important;\n`;\n\nconst StyledListItemText = styled(ListItemText)`\n  & > span {\n    color: ${({ color }) => color} !important;\n  }\n`;\n\nconst PostItem = (props) => {\n  const { post, setMobileOpen } = props;\n  const dispatch = useDispatch();\n\n  const {\n    id,\n    title,\n    author,\n    thumbnail,\n    num_comments,\n    created_utc,\n    clicked,\n  } = post.data;\n\n  return (\n    <Fragment key={id}>\n      <ListItem\n        button\n        onClick={() => {\n          dispatch(markAsRead(id));\n          dispatch(seePostDetails(post));\n          setMobileOpen(false);\n        }}\n        alignItems={\"flex-start\"}\n      >\n        <ListItemAvatar>\n          <Avatar\n            alt={id}\n            src={thumbnail}\n            onClick={(e) => {\n              e.stopPropagation();\n              window.open(thumbnail);\n            }}\n          />\n        </ListItemAvatar>\n        <StyledListItemText\n          color={clicked ? \"rgba(0,0,0,.3)\" : \"#000\"}\n          primary={title}\n          secondary={\n            <>\n              <Typography\n                component={\"span\"}\n                variant={\"body2\"}\n                color={\"textSecondary\"}\n              >\n                Posted by <strong>u/{author}</strong> {getDate(created_utc)}{\" \"}\n              </Typography>\n            </>\n          }\n        />\n      </ListItem>\n      <ActionGrid container justify={\"center\"} alignItems={\"center\"}>\n        <Grid item xs>\n          <DismissButton\n            startIcon={<DeleteIcon />}\n            onClick={() => {\n              dispatch(dismissPost(id));\n            }}\n          >\n            Dismiss\n          </DismissButton>\n        </Grid>\n        <Grid item xs>\n          <Typography\n            component={\"span\"}\n            variant={\"body2\"}\n            color={\"textSecondary\"}\n          >\n            {`${num_comments} comments`}\n          </Typography>\n        </Grid>\n      </ActionGrid>\n      <Divider />\n    </Fragment>\n  );\n};\n\nexport default PostItem;\n","import React, { useRef, useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport { Grid, CircularProgress } from \"@material-ui/core\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport PostItem from \"./PostItem\";\nimport { loadRedditPosts } from \"../utils\";\nimport { isEmpty } from \"lodash\";\n\nconst PostsGrid = styled(Grid)`\n  min-width: 100%;\n  height: 100%;\n  overflow-y: scroll;\n`;\n\nconst StyledDiv = styled.div`\n  display: flex !important;\n  justify-content: center !important;\n`;\n\nconst StyledCircularProgress = styled(CircularProgress)`\n  margin: 0;\n  position: absolute;\n  top: ${({ top }) => top}%;\n`;\n\nconst PostsList = ({ setMobileOpen }) => {\n  const { posts, isLoading, lastPostId } = useSelector((state) => state);\n  const dispatch = useDispatch();\n\n  if (isEmpty(posts) && !isLoading && !lastPostId)\n    loadRedditPosts(dispatch, { limit: 50 });\n  const latestPost = useRef();\n\n  const lastElementRef = useCallback(\n    (node) => {\n      if (isLoading) return;\n      if (latestPost.current) latestPost.current.disconnect();\n\n      latestPost.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting) {\n          loadRedditPosts(dispatch, { limit: 50, after: lastPostId });\n        }\n      });\n\n      if (node) latestPost.current.observe(node);\n    },\n    [isLoading, dispatch, lastPostId]\n  );\n\n  return (\n    <>\n      <PostsGrid item xs>\n        {posts.map((post, i) => {\n          if (posts.length === i + 1) {\n            return (\n              <div key={post.data.id} ref={lastElementRef}>\n                <PostItem post={post} setMobileOpen={setMobileOpen} />\n              </div>\n            );\n          }\n          return (\n            <PostItem\n              key={post.data.id}\n              post={post}\n              setMobileOpen={setMobileOpen}\n            />\n          );\n        })}\n        {isLoading && (\n          <StyledDiv>\n            <StyledCircularProgress top={isEmpty(posts) ? \"50\" : \"100\"} />\n          </StyledDiv>\n        )}\n      </PostsGrid>\n    </>\n  );\n};\n\nexport default PostsList;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport {\n  CardHeader,\n  Card,\n  CardMedia,\n  CardActions,\n  Typography,\n} from \"@material-ui/core\";\nimport { useSelector } from \"react-redux\";\nimport { getDate, parseHtml } from \"../utils\";\nimport CommentIcon from \"@material-ui/icons/ChatBubble\";\nimport ScoreIcon from \"@material-ui/icons/TrendingUp\";\nimport { isEmpty } from \"lodash\";\n\nconst StyledImg = styled.img`\n  max-width: 50% !important;\n`;\n\nconst StyledLink = styled.a`\n  font-weight: bold !important;\n  color: rgba(0, 0, 0, 0.54);\n  text-decoration: none !important;\n`;\n\nconst StyledCardMedia = styled(CardMedia)`\n  display: flex !important;\n  justify-content: center !important;\n`;\n\nconst StyledTypography = styled(Typography)`\n  display: flex !important;\n  align-items: center !important;\n  color: rgba(0, 0, 0, 0.54) !important;\n\n  & > svg {\n    margin-right: 5px !important;\n  }\n`;\n\nconst StyledVideo = styled.video`\n  max-width: 50% !important;\n`;\n\nconst Media = ({ post }) => {\n  const { post_hint, url, secure_media, media_embed } = post.data;\n  switch (post_hint) {\n    case \"image\":\n      return <StyledImg src={url} />;\n    case \"hosted:video\":\n    case \"rich:video\":\n      const fallbackUrl = secure_media?.reddit_video?.fallback_url;\n      const mediaEmbedContent = parseHtml(media_embed?.content);\n      return fallbackUrl ? (\n        <StyledVideo controls autoPlay loop duration>\n          <source src={fallbackUrl} type=\"video/mp4\" />\n        </StyledVideo>\n      ) : (\n        <div\n          className=\"content\"\n          dangerouslySetInnerHTML={{ __html: mediaEmbedContent }}\n        ></div>\n      );\n    default:\n      return (\n        <Typography>\n          <a href={url} target={\"_blank\"} rel={\"noopener noreferrer\"}>\n            {url}\n          </a>\n        </Typography>\n      );\n  }\n};\n\nconst PostDetails = () => {\n  const { post } = useSelector((state) => state);\n\n  const {\n    title,\n    author,\n    created_utc,\n    num_comments,\n    subreddit_name_prefixed,\n    upvote_ratio,\n    score,\n  } = post.data || {};\n\n  return !isEmpty(post) ? (\n    <Card>\n      <CardHeader\n        title={title}\n        subheader={\n          <>\n            <StyledLink\n              href={`https://reddit.com/${subreddit_name_prefixed}`}\n              target={\"_blank\"}\n            >\n              {subreddit_name_prefixed}\n            </StyledLink>{\" \"}\n            • Posted by <strong>u/{author}</strong> {getDate(created_utc)}{\" \"}\n          </>\n        }\n      />\n      <StyledCardMedia>\n        <Media post={post} />\n      </StyledCardMedia>\n      <CardActions>\n        <StyledTypography>\n          <CommentIcon fontSize={\"small\"} />\n          {`${num_comments} comments`}\n        </StyledTypography>\n        <StyledTypography\n          style={{\n            flexGrow: \"1\",\n          }}\n        >\n          <ScoreIcon fontSize={\"small\"} />\n          {`${score} points`}\n        </StyledTypography>\n        <StyledTypography>\n          {`${Math.floor(upvote_ratio * 100)}% upvoted`}\n        </StyledTypography>\n      </CardActions>\n    </Card>\n  ) : (\n    <Card>\n      <CardHeader\n        title={\"No post selected\"}\n        subheader={\"Select one post from the posts list to see the details\"}\n      />\n    </Card>\n  );\n};\n\nexport default PostDetails;\n","import React, { useState } from \"react\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport PostsList from \"./PostsList\";\nimport PostDetails from \"./PostDetails\";\nimport { Button } from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { dismissAllPosts } from \"../redux/reducers/postsReducer\";\nimport { loadRedditPosts } from \"../utils\";\n\nconst drawerWidth = 440;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  drawer: {\n    [theme.breakpoints.up(\"md\")]: {\n      width: drawerWidth,\n      flexShrink: 0,\n    },\n  },\n  appBar: {\n    [theme.breakpoints.up(\"md\")]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n      marginLeft: drawerWidth,\n    },\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n    [theme.breakpoints.up(\"md\")]: {\n      display: \"none\",\n    },\n  },\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    [theme.breakpoints.down(\"sm\")]: {\n      width: drawerWidth * 0.65,\n    },\n    width: drawerWidth,\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n}));\n\nconst Layout = ({ window }) => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const theme = useTheme();\n  const [mobileOpen, setMobileOpen] = useState(false);\n  const { isLoading, lastPostId } = useSelector((state) => state);\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  const container =\n    window !== undefined ? () => window().document.body : undefined;\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            edge=\"start\"\n            onClick={handleDrawerToggle}\n            className={classes.menuButton}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" noWrap style={{ flexGrow: \"1\" }}>\n            Reddit posts\n          </Typography>\n          <Button\n            variant=\"contained\"\n            startIcon={<DeleteIcon />}\n            disabled={isLoading}\n            onClick={() => {\n              dispatch(dismissAllPosts());\n              loadRedditPosts(dispatch, { limit: 50, after: lastPostId });\n            }}\n          >\n            Dismiss all posts\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <nav className={classes.drawer}>\n        <Hidden mdUp implementation=\"css\">\n          <Drawer\n            container={container}\n            variant=\"temporary\"\n            anchor={theme.direction === \"rtl\" ? \"right\" : \"left\"}\n            open={mobileOpen}\n            onClose={handleDrawerToggle}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true,\n            }}\n          >\n            <PostsList setMobileOpen={setMobileOpen} />\n          </Drawer>\n        </Hidden>\n        <Hidden smDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            <PostsList setMobileOpen={setMobileOpen} />\n          </Drawer>\n        </Hidden>\n      </nav>\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        <PostDetails />\n      </main>\n    </div>\n  );\n};\n\nexport default Layout;\n","import React from \"react\";\nimport Layout from \"./components/Layout\";\n\nconst App = () => <Layout />;\n\nexport default App;\n","import { createStore } from \"redux\";\nimport { postsReducer } from \"../reducers/postsReducer\";\n\nconst store = createStore(\n  postsReducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport store from \"./redux/store\";\nimport { Provider } from \"react-redux\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}